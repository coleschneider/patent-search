<!DOCTYPE html>
<html>
<body>
<div class="container">
  <div class="row">
    <div class="span12">
      <form action="post" action="/">
        <input type="file" name="myFile" id="myFile">
        <div class="form-actions">
          <button type="text" class="btn btn-primary" type="submit">
          submit
          </button>
        </div>
        <hr>
        <div class="row">
          <div class="span12">
            <div class="progress progress-striped active hide">
              <div class="bar" style="width: 0%"></div>
            </div>
          </div>
        </div>
      </form>
    </div>
  </div>
</div>

</body>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
<script>
    $(function() {
  
  var showInfo = function(message) {
    $('div.progress').hide();
    $('strong.message').text(message);
    $('div.alert').show();
  };
  
  $('input[type="submit"]').on('click', function(evt) {
    evt.preventDefault();
    $('div.progress').show();
    var formData = new FormData();
    var file = document.getElementById('myFile').files[0];
    formData.append('myFile', file);
    console.log({file})
    var xhr = new XMLHttpRequest();
    
    xhr.open('post', '/', true);
    
    xhr.upload.onprogress = function(e) {
      if (e.lengthComputable) {
        var percentage = (e.loaded / e.total) * 100;
        $('div.progress div.bar').css('width', percentage + '%');
      }
    };
    
    xhr.onerror = function(e) {
      showInfo('An error occurred while submitting the form. Maybe your file is too big');
    };
    
    xhr.onload = function() {
      showInfo(this.statusText);
    };
    
    xhr.send(formData);
    
  });
  
});
</script>
</html>